<div class="modal fade" id="date-modal" tabindex="-1" role="dialog" aria-labelledby="closeModel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="date-modal-title">Title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div id="date-modal-body" class="modal-body">
            Message
        </div>
        <span class="form-group">
            <span class="form-row row px-4">
                <select id="date-modal-day" class="form-control col-md-2 mx-2">
                    {% for d in min_day_to_max_day %}
                        {% if d == day %}
                            <option selected>{{ d }}</option>
                        {% else %}
                            <option>{{ d }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <select id="date-modal-month" class="form-control col-md-3 mx-2">
                    {% for m in months_in_year %}
                        {% if m == month %}
                            <option selected>{{ m }}</option>
                        {% else %}
                            <option>{{ m }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <select id="date-modal-year" class="form-control col-md-2 mx-2">
                    {% for y in all_years %}
                        {% if y == year %}
                            <option selected>{{ y }}</option>
                        {% else %}
                            <option>{{ y }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </span>
        </span>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="date-modal-action" data-dismiss="modal">Action</button>
        </div>
        </div>
    </div>
</div>

<script>
    let showDateCallbackModal = function(modalTitle, modalMessage, actionTitle, callback) {
        var modal = $('#date-modal')[0];
        var clonedModal = modal.cloneNode(true);
        modal.parentNode.replaceChild(clonedModal, modal);

        $('#date-modal-title')[0].innerText = modalTitle;
        $('#date-modal-body')[0].innerText = modalMessage;
        $('#date-modal-action')[0].innerText = actionTitle;
        $('#date-modal-action').click(callback);
        $('#date-modal').modal('show');
    }

    document.onkeydown = function(e){
          e = e || window.event;
          var key = e.which || e.keyCode;
          if (key === 13) {
               $('#callback-modal-action')[0].click();
          }
     }
</script>